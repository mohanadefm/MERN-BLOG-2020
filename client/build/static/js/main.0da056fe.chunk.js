(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,a){},34:function(e,t,a){e.exports=a.p+"static/media/logo.50de3ff5.svg"},35:function(e,t,a){e.exports=a(63)},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(32),c=a.n(s),o=(a(18),a(2)),u=a(11),l=a(5),i=a(3),m=a.n(i),p="http://localhost:3040",d=function(){return localStorage.getItem("authToken")},f=function(){localStorage.clear()};function b(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.b,{style:h.default,activeStyle:h.active,exact:!0,to:"/login"},"Login"),r.a.createElement(u.b,{style:h.default,activeStyle:h.active,exact:!0,to:"/register"},"Register"))}function g(e){return r.a.createElement(r.a.Fragment,null,e.user.admin?r.a.createElement(u.b,{style:h.default,activeStyle:h.active,exact:!0,to:"/users"},"Users"):r.a.createElement(u.b,{style:h.default,activeStyle:h.active,exact:!0,to:"/posts"},"Posts"),r.a.createElement(u.b,{style:h.default,activeStyle:h.active,exact:!0,to:"/profile"},"Profile"),r.a.createElement(u.b,{style:h.default,activeStyle:h.active,exact:!0,to:"/log-out",onClick:e.logout},"Logout"))}var v=function(e){var t=e.isLoggedIn;return r.a.createElement("div",{className:"header"},r.a.createElement(u.b,{style:h.default,activeStyle:h.active,exact:!0,to:"/"},"Home"),t?r.a.createElement(g,{logout:function(){f(),m.a.defaults.headers.common.Authorization=null,window.location.href="/"},user:t}):r.a.createElement(b,null))},h={active:{color:"#f3ca20",fontSize:"25px"},default:{textDecoration:"none",color:"#00c6ff",fontSize:"20px"}};var E=function(){var e=(new Date).getFullYear();return r.a.createElement("div",{className:"footer"},r.a.createElement("p",null,"Copyright Reserved ",e))},O=a(10),j=a(15),y=a(1),w=a.n(y),k=a(4),x=a(34),P=a.n(x);function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(a,!0).forEach(function(t){Object(O.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function D(e){var t=e.item,a=e.deletePost,s=e.editPost,c=e.props,u=Object(n.useState)("Edit"),l=Object(o.a)(u,2),i=l[0],m=l[1],p=Object(n.useState)(t.title),d=Object(o.a)(p,2),f=d[0],b=d[1],g=Object(n.useState)(t.post),v=Object(o.a)(g,2),h=v[0],E=v[1],O=function(){var e=Object(k.a)(w.a.mark(function e(t,a){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"Edit"===i?m("Save"):(m("Edit"),s(t,a));case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"onepost"},null===c.user?null:c.user.admin?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){a(t)}},"Delete"),r.a.createElement("button",{onClick:function(){O(t._id,{title:f,post:h})}},i)):null,"Edit"===i?r.a.createElement("h2",null,t.title):r.a.createElement("input",{value:f,onChange:function(e){var t=e.target.value;return b(t)}}),r.a.createElement("h4",null,"Posted by: ",t.user?t.user.username:"Guest"),r.a.createElement("h4",null,"Publish date: ",new Date(t.date||new Date).toLocaleDateString()),"Edit"===i?r.a.createElement("p",null,t.post):r.a.createElement("textarea",{value:h,onChange:function(e){var t=e.target.value;return E(t)}}))}function _(e){var t=e.postId,a=e.comments,s=e.addComment,c=e.loading,u=e.message,l=e.props,i=e.deleteComment,m=Object(n.useState)(""),p=Object(o.a)(m,2),d=p[0],f=p[1];return r.a.createElement("div",{className:"OnePostComments",key:t},r.a.createElement("h3",null,"Comments:"),0===a.length?r.a.createElement("p",null,"There are no comments."):a.map(function(e,t){return r.a.createElement("div",{className:"OnePostComments-lists",key:t},null===l.user?null:l.user.admin?r.a.createElement("button",{onClick:function(){i(e)}},"Delete"):null,r.a.createElement("p",null,"- ",e.body),r.a.createElement("p",{id:"p2"},r.a.createElement("span",null,"User: ",e.user?e.user.username:"Guest"),r.a.createElement("span",null,"Date: ",e.date)))}),r.a.createElement("div",{style:{width:"95%"}},r.a.createElement("input",{onChange:function(e){return f(e.target.value)},value:d,placeholder:"Comment..."}),r.a.createElement("button",{onClick:function(){s({postId:t,comment:d}),f("")},disabled:c},"Add comment"),r.a.createElement("br",null),u.success?null:r.a.createElement("p",null,u.message)))}var N=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),s=a[0],c=a[1],u=Object(n.useState)("descending"),l=Object(o.a)(u,2),i=l[0],f=l[1],b=Object(n.useState)(!0),g=Object(o.a)(b,2),v=g[0],h=g[1],E=Object(n.useState)({success:null,message:null}),O=Object(o.a)(E,2),y=O[0],x=O[1];Object(n.useEffect)(function(){!function(){var e=Object(k.a)(w.a.mark(function e(){var t,a,n,r,s;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("".concat(p,"/posts?sort=").concat(i));case 3:t=e.sent,a=t.data,n=a.ok,r=a.data,s=a.message,n?(h(!1),x({success:!0,message:s}),c(r.posts)):(h(!1),x({success:!1,message:s})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),h(!1),x({success:!1,message:"Try again!"});case 13:case"end":return e.stop()}},e,null,[[0,9]])}));return function(){return e.apply(this,arguments)}}()()},[i]);var S=function(){var t=Object(k.a)(w.a.mark(function t(a){var n,r,o,u,l,i,f;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.user){t.next=3;break}return alert("Login to comment!"),t.abrupt("return");case 3:if(""!==a.comment){t.next=7;break}return alert("Please insert a comment!"),t.abrupt("return");case 7:return t.prev=8,t.next=11,m.a.post("".concat(p,"/comments"),{post_id:a.postId,body:a.comment},{headers:{authorization:d()}});case 11:n=t.sent,r=n.data,o=r.ok,u=r.data,l=r.message,o?(h(!1),x({success:!0,message:l}),(i=u.comment).user=e.user,f=s.map(function(e){return e._id===a.postId?(e.comments=[].concat(Object(j.a)(e.comments),[i]),e):e}),c(f)):(h(!1),x({success:!1,message:l})),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(8),h(!1),x({success:!1,message:"Try again!"});case 21:case"end":return t.stop()}},t,null,[[8,17]])}));return function(e){return t.apply(this,arguments)}}(),N=function(){var e=Object(k.a)(w.a.mark(function e(t){var a,n,r,o,u;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure to delete (".concat(t.title," post)?"))){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,m.a.delete("".concat(p,"/posts/").concat(t._id),{headers:{authorization:d()}});case 6:a=e.sent,n=a.data,r=n.ok,o=n.message,r?(h(!1),x({success:!0,message:o}),u=s.filter(function(e){return e._id!==t._id}),c(u)):(h(!1),x({success:!1,message:o})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),h(!1),x({success:!1,message:"Try again!"});case 16:case"end":return e.stop()}},e,null,[[3,12]])}));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(k.a)(w.a.mark(function e(t){var a,n,r,o,u,l,i;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.delete("".concat(p,"/comments/").concat(t._id),{headers:{authorization:d()}});case 3:a=e.sent,n=a.data,r=n.ok,o=n.message,u=n.data,r?(h(!1),x({success:!0,message:o}),l=u.comment._id,i=s.map(function(e){if(e._id===t.post){var a=e.comments.filter(function(e){return l!==e._id});e.comments=a}return e}),c(i)):(h(!1),x({success:!1,message:o})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),h(!1),x({success:!1,message:"Try again!"});case 13:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(k.a)(w.a.mark(function e(t,a){var n,r,o,u,l,i,f;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==a.post&&""!==a.title){e.next=2;break}return e.abrupt("return",alert("Please enter a valid text!"));case 2:return e.prev=2,e.next=5,m.a.put("".concat(p,"/posts/").concat(t),{title:a.title,post:a.post},{headers:{authorization:d()}});case 5:n=e.sent,r=n.data,o=r.ok,u=r.data,l=r.message,o?(i={title:u.post.title,post:u.post.post},f=s.map(function(e){return t===e._id?C({},e,{},i):e}),c(f)):alert(l),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),alert("Please try again!");case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"home"},r.a.createElement("img",{src:P.a,className:"App-logo",alt:"blog"}),r.a.createElement("h1",null,e.user?"Welcome back (".concat(e.user.username,") to Mohanad Blog"):"Welcome to Mohanad Blog"),r.a.createElement("div",{className:"selectOption"},r.a.createElement("label",{htmlFor:"sorting-date"},"Sorting by "),r.a.createElement("select",{id:"sorting-date",onChange:function(e){return f(e.target.value)}},r.a.createElement("option",{value:"descending"},"descending"),r.a.createElement("option",{value:"ascending"},"ascending"))),v?r.a.createElement("h2",null,"Loading..."):y.success?0===s.length?r.a.createElement("h2",null,"There are no posts."):s.map(function(t,a){return r.a.createElement("div",{className:"posts-one-post",key:a},r.a.createElement(D,{item:t,deletePost:N,editPost:z,props:e}),r.a.createElement("div",{className:"posts-comments"},r.a.createElement(_,{postId:t._id,comments:t.comments,deleteComment:T,props:e,addComment:S,loading:v,message:y})))}):r.a.createElement("p",null,y.message))},T=a(16);function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var I=function(e){var t=Object(n.useState)({email:"",password:""}),a=Object(o.a)(t,2),s=a[0],c=a[1],u=Object(n.useState)(""),l=Object(o.a)(u,2),i=l[0],d=l[1],f=Object(n.useState)(null),b=Object(o.a)(f,2),g=b[0],v=b[1],h=function(){var t=Object(k.a)(w.a.mark(function t(a){var n,r,c,o,u;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,m.a.post("".concat(p,"/users/login"),{email:s.email,password:s.password});case 4:n=t.sent,r=n.data,c=r.ok,o=r.message,u=r.data,c?(d(o),v(!0),l=u.token,localStorage.setItem("authToken",l),e.setUser(Object(T.a)(u.token))):(d(o),v(!1)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),d("Try again!"),v(!1);case 14:case"end":return t.stop()}var l},t,null,[[1,10]])}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"login"},r.a.createElement("form",{onSubmit:h,onChange:function(e){c(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(a,!0).forEach(function(t){Object(O.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},s,Object(O.a)({},e.target.name,e.target.value)))},className:"login-box"},r.a.createElement("label",null,"Email   ")," ",r.a.createElement("input",{name:"email"}),r.a.createElement("label",null,"Password")," ",r.a.createElement("input",{name:"password"}),r.a.createElement("button",{type:"submit",name:"submit"},"Login"),i?r.a.createElement("h4",{style:{color:g?"green":"red"}},i):null))};function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var L=function(e){var t=Object(n.useState)({username:"",email:"",password:"",password2:""}),a=Object(o.a)(t,2),s=a[0],c=a[1],u=Object(n.useState)(""),l=Object(o.a)(u,2),i=l[0],d=l[1],f=Object(n.useState)(null),b=Object(o.a)(f,2),g=b[0],v=b[1],h=function(){var t=Object(k.a)(w.a.mark(function t(a){var n,r,c,o;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,m.a.post("".concat(p,"/users/register"),{username:s.username,email:s.email,password:s.password,password2:s.password2});case 4:n=t.sent,r=n.data,c=r.ok,o=r.message,c?(d(o),v(!0),setTimeout(function(){e.history.push("/login")},2e3)):(d(o),v(!1)),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0),d("Try again!"),v(!1);case 15:case"end":return t.stop()}},t,null,[[1,10]])}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"register"},r.a.createElement("form",{onSubmit:h,onChange:function(e){c(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(a,!0).forEach(function(t){Object(O.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},s,Object(O.a)({},e.target.name,e.target.value)))},className:"register-box"},r.a.createElement("label",null,"Username    ")," ",r.a.createElement("input",{name:"username",required:!0}),r.a.createElement("label",null,"Email    ")," ",r.a.createElement("input",{name:"email",required:!0}),r.a.createElement("label",null,"Password    ")," ",r.a.createElement("input",{name:"password",required:!0}),r.a.createElement("label",null,"Repeat password"),"  ",r.a.createElement("input",{name:"password2",required:!0}),r.a.createElement("button",{type:"submit",name:"submit"},"register"),i?r.a.createElement("h4",{style:{color:g?"green":"red"}},i):null))};function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(a,!0).forEach(function(t){Object(O.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function F(e){var t=e.item,a=e.deletePost,s=e.editPost,c=Object(n.useState)("Edit"),u=Object(o.a)(c,2),l=u[0],i=u[1],m=Object(n.useState)(t.title),p=Object(o.a)(m,2),d=p[0],f=p[1],b=Object(n.useState)(t.post),g=Object(o.a)(b,2),v=g[0],h=g[1],E=function(){var e=Object(k.a)(w.a.mark(function e(t,a){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"Edit"===l?i("Save"):(i("Edit"),s(t,a));case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"onepost"},r.a.createElement("button",{onClick:function(){a(t)}},"Delete"),r.a.createElement("button",{onClick:function(){E(t._id,{title:d,post:v})}},l),r.a.createElement("br",null),"Edit"===l?r.a.createElement("h2",null,t.title):r.a.createElement("input",{value:d,onChange:function(e){var t=e.target.value;return f(t)}}),r.a.createElement("h4",null,"Posted by: ",t.user.username),r.a.createElement("h4",null,"Publish date: ",new Date(t.date||new Date).toLocaleDateString()),"Edit"===l?r.a.createElement("p",null,t.post):r.a.createElement("textarea",{value:v,onChange:function(e){var t=e.target.value;return h(t)}}))}function R(e){var t=e.postId,a=e.comments,s=e.addComment,c=e.message,u=e.loading,l=e.deleteComment,i=Object(n.useState)(""),m=Object(o.a)(i,2),p=m[0],d=m[1];return r.a.createElement("div",{className:"OnePostComments",key:t},r.a.createElement("h3",null,"Comments:"),0===a.length?r.a.createElement("p",null,"There are no comments."):a.map(function(e,a){return r.a.createElement("div",{className:"OnePostComments-lists",key:a},r.a.createElement("button",{onClick:function(){return l(e._id,t)}},"Delete"),r.a.createElement("p",null,"- ",e.body),r.a.createElement("p",{id:"p2"},r.a.createElement("span",null," Username: ",e.user.username),r.a.createElement("span",null," Date: ",e.date)))}),r.a.createElement("div",{style:{width:"95%"}},r.a.createElement("input",{placeholder:"Comment...",value:p,onChange:function(e){return d(e.target.value)}}),r.a.createElement("button",{onClick:function(){s({postId:t,comment:p}),d("")},disabled:u},"Add comment"),r.a.createElement("br",null),c.success?null:r.a.createElement("p",null,c.message)))}var q=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),s=a[0],c=a[1],u=Object(n.useState)(""),l=Object(o.a)(u,2),i=l[0],f=l[1],b=Object(n.useState)(""),g=Object(o.a)(b,2),v=g[0],h=g[1],E=Object(n.useState)(!0),O=Object(o.a)(E,2),y=O[0],x=O[1],P=Object(n.useState)({success:null,message:null}),S=Object(o.a)(P,2),C=S[0],D=S[1],_=function(){var e=Object(k.a)(w.a.mark(function e(){var t,a,n,r,s;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("".concat(p,"/posts/user"),{headers:{authorization:d()}});case 3:t=e.sent,a=t.data,n=a.ok,r=a.data,s=a.message,n?(D({success:!0,message:s}),c(r.posts)):D({success:!1,message:s}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),D({success:!1,message:"Try again!"});case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)(function(){x(!0),_(),x(!1)},[]);var N=function(){var t=Object(k.a)(w.a.mark(function t(a){var n,r,o,u,l,b;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),""!==v&&""!==i){t.next=4;break}return alert("Please enter a valid text!"),t.abrupt("return");case 4:return t.prev=4,t.next=7,m.a.post("".concat(p,"/posts"),{title:i,post:v},{headers:{authorization:d()}});case 7:n=t.sent,r=n.data,o=r.ok,u=r.data,l=r.message,o?(b={title:u.post.title,post:u.post.post,_id:u.post._id,date:u.post.date,user:e.user,comments:[]},c([].concat(Object(j.a)(s),[b])),f(""),h("")):alert(l),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),alert("please try again");case 16:case"end":return t.stop()}},t,null,[[4,13]])}));return function(e){return t.apply(this,arguments)}}(),T=function(){var t=Object(k.a)(w.a.mark(function t(a){var n,r,o,u,l,i,f;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return""===a.comment&&alert("Please enter a comment!"),t.prev=1,t.next=4,m.a.post("".concat(p,"/comments"),{post_id:a.postId,body:a.comment},{headers:{authorization:d()}});case 4:n=t.sent,r=n.data,o=r.ok,u=r.data,l=r.message,o?(x(!1),D({success:!0,message:l}),(i=u.comment).user=e.user,f=s.map(function(e){return e._id===a.postId?(e.comments=[].concat(Object(j.a)(e.comments),[i]),e):e}),c(f)):(x(!1),D({success:!1,message:l})),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),x(!1),D({success:!1,message:"Try again!"});case 14:case"end":return t.stop()}},t,null,[[1,10]])}));return function(e){return t.apply(this,arguments)}}(),z=function(){var e=Object(k.a)(w.a.mark(function e(t){var a,n,r,o,u;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure?")){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,m.a.delete("".concat(p,"/posts/").concat(t._id),{headers:{authorization:d()}});case 6:a=e.sent,n=a.data,r=n.ok,o=n.message,r?(x(!1),D({success:!0,message:o}),u=s.filter(function(e){return e._id!==t._id}),c(u)):(x(!1),D({success:!1,message:o})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),x(!1),D({success:!1,message:"Try again!"});case 16:case"end":return e.stop()}},e,null,[[3,12]])}));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(k.a)(w.a.mark(function e(t,a){var n,r,o,u,l,i,f;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.delete("".concat(p,"/comments/").concat(t),{headers:{authorization:d()}});case 3:n=e.sent,r=n.data,o=r.ok,u=r.message,l=r.data,o?(x(!1),D({success:!0,message:u}),i=l.comment._id,f=s.map(function(e){if(e._id===a){var t=e.comments.filter(function(e){return i!==e._id});e.comments=t}return e}),c(f)):(x(!1),D({success:!1,message:u})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),x(!1),D({success:!1,message:"Try again!"});case 13:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t,a){return e.apply(this,arguments)}}(),U=function(){var e=Object(k.a)(w.a.mark(function e(t,a){var n,r,o,u,l,i,f;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==a.post&&""!==a.title){e.next=2;break}return e.abrupt("return",alert("Please enter a valid text!"));case 2:return e.prev=2,e.next=5,m.a.put("".concat(p,"/posts/").concat(t),{title:a.title,post:a.post},{headers:{authorization:d()}});case 5:n=e.sent,r=n.data,o=r.ok,u=r.data,l=r.message,o?(i={title:u.post.title,post:u.post.post},f=s.map(function(e){return t===e._id?B({},e,{},i):e}),c(f)):alert(l),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),alert("Please try again!");case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"posts"},r.a.createElement("h1",null,e.user.username," Posts"),r.a.createElement("form",{className:"posts-box",onSubmit:N},r.a.createElement("input",{onChange:function(e){return f(e.target.value)},value:i,placeholder:"Title"}),r.a.createElement("textarea",{onChange:function(e){return h(e.target.value)},value:v,placeholder:"Text..."}),r.a.createElement("button",{type:"submit",name:"submit"},"Post")),y?r.a.createElement("p",null,"Loading..."):C.success?0===s.length?r.a.createElement("h2",null,"There are no posts."):s.map(function(e,t){return r.a.createElement("div",{className:"posts-one-post",key:t},r.a.createElement(F,{item:e,deletePost:z,editPost:U}),r.a.createElement("div",{className:"posts-comments"},r.a.createElement(R,{postId:e._id,comments:e.comments,loading:y,addComment:T,message:C,deleteComment:I})))}):r.a.createElement("p",null,C.message))};var G=function(e){console.log(e);var t=Object(n.useState)([]),a=Object(o.a)(t,2),s=a[0],c=a[1],u=Object(n.useState)({success:null,message:null}),l=Object(o.a)(u,2),i=l[0],f=l[1],b=Object(n.useCallback)(Object(k.a)(w.a.mark(function e(){var t,a,n,r,s;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("".concat(p,"/users/getusers"),{headers:{authorization:d()}});case 3:t=e.sent,a=t.data,n=a.ok,r=a.data,s=a.message,n?(c(r.users),f({success:!0,message:s.message})):f({success:!1,message:s}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(i),f({success:!1,message:"Try again!"});case 13:case"end":return e.stop()}},e,null,[[0,9]])})),[f,c,i]),g=function(){var e=Object(k.a)(w.a.mark(function e(t){var a,n,r,o,u,l,i;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure to remove this user?")){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,m.a.delete("".concat(p,"/users/delete/").concat(t),{headers:{authorization:d()}});case 6:a=e.sent,n=a.data,r=n.ok,o=n.data,u=n.message,r?(f({success:!0,message:u}),l=o.findUser._id,i=s.filter(function(e){return l!==e._id}),console.log(i,l),c(i)):f({success:!1,message:u}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),f({success:!1,message:"Try again!"});case 15:case"end":return e.stop()}},e,null,[[3,12]])}));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){b()},[]),r.a.createElement("div",{className:"users"},r.a.createElement("h1",null,"Blog Users"),s.map(function(t,a){return r.a.createElement("div",{className:"users-box",key:a},r.a.createElement("p",null,"Username: ",t.username),r.a.createElement("p",null,"E-mail: ",t.email),t.admin?r.a.createElement("p",null,"Admin User"):null," ",t.admin?null:r.a.createElement("button",{onClick:function(){return a="/userposts",n=t._id,r=t.username,void e.history.push({pathname:a,state:{userId:n,username:r}});var a,n,r}},"User Posts"),t.admin?null:r.a.createElement("button",{onClick:function(){return g(t._id)}},"Remove User"))}))};var W=function(e){console.log(e.user);var t=Object(n.useState)(""),a=Object(o.a)(t,2),s=a[0],c=a[1],u=Object(n.useState)(""),l=Object(o.a)(u,2),i=l[0],f=l[1],b=Object(n.useState)(""),g=Object(o.a)(b,2),v=g[0],h=g[1],E=Object(n.useState)({success:null,message:null}),O=Object(o.a)(E,2),j=O[0],y=O[1],x=function(){var t=Object(k.a)(w.a.mark(function t(a){var n,r,o,u;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==s.length){t.next=2;break}return t.abrupt("return",alert("Please insert a valid username!"));case 2:if(s!==e.user.username){t.next=4;break}return t.abrupt("return",alert("You can not use same username!"));case 4:return t.prev=4,t.next=7,m.a.put("".concat(p,"/users/updateusername"),{username:a},{headers:{authorization:d()}});case 7:n=t.sent,r=n.data,o=r.ok,u=r.message,o?(y({success:!0,message:"Successfully updated, logout to apply changes!"}),c("")):y({success:!1,message:u}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),y({success:!1,message:"Try again!"});case 16:case"end":return t.stop()}},t,null,[[4,13]])}));return function(e){return t.apply(this,arguments)}}(),P=function(){var e=Object(k.a)(w.a.mark(function e(t){var a,n,r,s;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==i.length&&0!==v.length){e.next=2;break}return e.abrupt("return",alert("Please insert a valid password!"));case 2:if(i===v){e.next=4;break}return e.abrupt("return",alert("Passwords must match!"));case 4:return e.prev=4,e.next=7,m.a.put("".concat(p,"/users/updatepassword"),{password:i,password2:v},{headers:{authorization:d()}});case 7:a=e.sent,n=a.data,r=n.ok,s=n.message,r?(y({success:!0,message:"Successfully updated, logout to apply changes!"}),f(""),h("")):y({success:!1,message:s}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),y({success:!1,message:"Try again!"});case 16:case"end":return e.stop()}},e,null,[[4,13]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"profile"},r.a.createElement("h2",null,e.user.username),r.a.createElement("h2",null,e.user.email),r.a.createElement("div",{className:"profile-box"},r.a.createElement("div",null,r.a.createElement("h3",null,"Change username"),r.a.createElement("input",{onChange:function(e){return c(e.target.value)},value:s,placeholder:"Enter new username"}),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return x(s)}},"Save")),r.a.createElement("div",null,r.a.createElement("h3",null,"Change password"),r.a.createElement("input",{onChange:function(e){return f(e.target.value)},value:i,placeholder:"Enter new password"}),r.a.createElement("br",null),r.a.createElement("input",{onChange:function(e){return h(e.target.value)},value:v,placeholder:"Repeat new password"}),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return P(i)}},"Save"))),j.success&&r.a.createElement("p",null,j.message))};var J=function(e){console.log(e);var t=Object(n.useState)([]),a=Object(o.a)(t,2),s=a[0],c=a[1],u=Object(n.useState)({success:null,message:null}),l=Object(o.a)(u,2),i=l[0],f=l[1],b=Object(n.useCallback)(Object(k.a)(w.a.mark(function t(){var a,n,r,s,o,u;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.history.location.state.userId){t.next=3;break}return t.abrupt("return",alert("User id is not existed!"));case 3:return t.prev=3,t.next=6,m.a.get("".concat(p,"/posts/").concat(a),{headers:{authorization:d()}});case 6:n=t.sent,r=n.data,s=r.ok,o=r.data,u=r.message,s?(f({success:!0,message:u}),c(o.posts)):f({success:!1,message:u}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.log(i),f({success:!1,message:"Try again!"});case 15:case"end":return t.stop()}},t,null,[[3,11]])})),[f,c,i,e.history.location.state.userId]);return Object(n.useEffect)(function(){b()},[]),r.a.createElement("div",{className:"userPosts"},r.a.createElement("button",{onClick:function(){return t="/users",void e.history.push(t);var t}},"Go Back"),r.a.createElement("h1",null,e.history.location.state.username," Posts"),0===s.length?r.a.createElement("h2",null,"There are no posts."):s.map(function(e,t){return r.a.createElement("div",{className:"userPosts-box",key:t},r.a.createElement("h3",null,e.title),r.a.createElement("h5",null,"Publish Date: ",new Date(e.date||new Date).toLocaleDateString()),r.a.createElement("p",null,e.post),r.a.createElement("div",{className:"userPosts-comments"},r.a.createElement("h4",null,"Comments:"),0===e.comments.length?r.a.createElement("p",null,"There are no comments."):e.comments.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("span",null,e.body," - "),r.a.createElement("span",null,"By: ",e.user?e.user.username:"Guest"))))})))}))};var M=function(){var e=Object(n.useState)({}),t=Object(o.a)(e,2),a=t[0],s=t[1],c=Object(n.useCallback)(function(){var e=d();if(e){var t=Object(T.a)(e);1e3*t.exp<Date.now()&&(s(null),f()),delete t.password,s(t)}else s(null)},[s]);return Object(n.useEffect)(function(){c()},[c]),r.a.createElement("div",{className:"App"},r.a.createElement(u.a,null,r.a.createElement(v,{isLoggedIn:a}),r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/"},"         ",r.a.createElement(N,{user:a})," "),r.a.createElement(l.b,{exact:!0,path:"/register",render:function(e){return a?r.a.createElement(l.a,{to:"/register"}):r.a.createElement(L,e)}}),r.a.createElement(l.b,{exact:!0,path:"/login",render:function(e){return a?r.a.createElement(l.a,{to:a.admin?"/users":"/posts"}):r.a.createElement(I,Object.assign({},e,{setUser:s}))}}),r.a.createElement(l.b,{exact:!0,path:"/posts",render:function(e){return a?r.a.createElement(q,Object.assign({},e,{user:a})):r.a.createElement(l.a,{to:"/login"})}}),r.a.createElement(l.b,{exact:!0,path:"/profile",render:function(e){return a?r.a.createElement(W,Object.assign({},e,{user:a})):r.a.createElement(l.a,{to:"/login"})}}),r.a.createElement(l.b,{exact:!0,path:"/users",render:function(e){return a?r.a.createElement(G,Object.assign({},e,{user:a})):r.a.createElement(l.a,{to:"/login"})}}),r.a.createElement(l.b,{exact:!0,path:"/userposts",render:function(e){return a?r.a.createElement(J,Object.assign({},e,{user:a})):r.a.createElement(l.a,{to:"/login"})}})),r.a.createElement(E,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[35,1,2]]]);
//# sourceMappingURL=main.0da056fe.chunk.js.map